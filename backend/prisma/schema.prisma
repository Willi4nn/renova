generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Client {
  id           String   @id @default(uuid())
  name         String
  address      String
  phone_number String
  created_at   DateTime @default(now()) @db.Timestamptz

  orders Order[]

  @@map("clients")
}

model Order {
  id                     String   @id @default(uuid())
  client_id              String
  furniture_name         String
  fabric_name            String
  fabric_code            String?
  fabric_price_per_meter Float    @db.DoublePrecision
  fabric_meters          Float    @db.DoublePrecision
  cost_fabric            Float    @db.DoublePrecision
  cost_foam              Float    @db.DoublePrecision
  cost_labor             Float    @db.DoublePrecision
  cost_shipping          Float    @db.DoublePrecision
  cost_other             Float    @db.DoublePrecision
  total_cost             Float    @db.DoublePrecision
  final_price            Float    @db.DoublePrecision
  net_profit             Float    @db.DoublePrecision
  collection_date        String
  delivery_date          String?
  status                 String
  notes                  String?  @db.Text
  created_at             DateTime @default(now()) @db.Timestamptz
  updated_at             DateTime @updatedAt @db.Timestamptz

  client Client @relation(fields: [client_id], references: [id], onDelete: Cascade)

  @@index([client_id])
  @@index([status])
  @@map("orders")
}
